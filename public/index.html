<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Talent Manager - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø² ÙˆØ§Ù„ÙÙ†Ø§Ù†ÙŠÙ†</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; color: #333; }
    
    /* Layout */
    .app-container { display: flex; height: 100vh; }
    .sidebar { width: 280px; background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%); color: white; padding: 20px; overflow-y: auto; box-shadow: 2px 0 8px rgba(0,0,0,0.2); transition: transform 0.3s ease; position: relative; }
    .sidebar.collapsed { transform: translateX(-280px); }
    .toggle-sidebar { position: absolute; left: -50px; top: 20px; background: #0a7ea4; color: white; border: none; width: 40px; height: 40px; border-radius: 0 6px 6px 0; cursor: pointer; font-size: 20px; display: flex; align-items: center; justify-content: center; }
    
    /* Logo and Navigation */
    .logo { font-size: 24px; font-weight: bold; margin-bottom: 30px; display: flex; align-items: center; gap: 10px; }
    .nav-section { margin-bottom: 30px; }
    .nav-title { font-size: 12px; font-weight: 600; color: #999; margin-bottom: 10px; text-transform: uppercase; }
    .nav-item { padding: 12px 16px; margin: 6px 0; border-radius: 6px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 10px; }
    .nav-item:hover { background: rgba(255,255,255,0.1); }
    .nav-item.active { background: #0a7ea4; font-weight: 600; }
    
    /* Main Content */
    .main-content { flex: 1; display: flex; flex-direction: column; }
    .header { background: white; padding: 20px 30px; border-bottom: 1px solid #e0e0e0; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
    .header h1 { font-size: 28px; color: #333; }
    .header-actions { display: flex; gap: 15px; align-items: center; }
    
    /* Buttons */
    .btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; transition: all 0.2s; }
    .btn-primary { background: #0a7ea4; color: white; }
    .btn-primary:hover { background: #086c8f; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(10, 126, 164, 0.3); }
    .btn-secondary { background: #f0f0f0; color: #333; }
    .btn-secondary:hover { background: #e0e0e0; }
    .btn-small { padding: 6px 12px; font-size: 12px; }
    .btn-danger { background: #ef4444; color: white; }
    .btn-danger:hover { background: #dc2626; }
    
    /* Content Area */
    .content { flex: 1; overflow-y: auto; padding: 30px; }
    .page { display: none; }
    .page.active { display: block; }
    .page-header { margin-bottom: 30px; }
    .page-title { font-size: 24px; font-weight: 600; margin-bottom: 10px; }
    .page-subtitle { color: #666; font-size: 14px; }
    
    /* Filters and Controls */
    .filters-bar { display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; align-items: center; }
    .search-input { flex: 1; min-width: 250px; padding: 10px 16px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; transition: all 0.2s; }
    .search-input:focus { outline: none; border-color: #0a7ea4; box-shadow: 0 0 0 3px rgba(10, 126, 164, 0.1); }
    .filter-select { padding: 10px 12px; border: 1px solid #ddd; border-radius: 6px; background: white; cursor: pointer; min-width: 150px; }
    .view-controls { display: flex; gap: 10px; }
    .view-btn { padding: 8px 12px; border: 1px solid #ddd; background: white; border-radius: 6px; cursor: pointer; }
    .view-btn.active { background: #0a7ea4; color: white; border-color: #0a7ea4; }
    
    /* Talent Cards */
    .talents-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    .talents-list { display: flex; flex-direction: column; gap: 15px; }
    .talent-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer; }
    .talent-card:hover { transform: translateY(-4px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
    .talent-card.list { display: flex; }
    
    .talent-image-container { position: relative; width: 100%; height: 200px; overflow: hidden; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); flex-shrink: 0; }
    .talent-card.list .talent-image-container { width: 150px; height: 150px; }
    .talent-image { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 64px; position: relative; }
    .talent-image img { width: 100%; height: 100%; object-fit: cover; }
    .talent-card.list .talent-image { font-size: 48px; }
    
    .talent-info { padding: 20px; flex: 1; }
    .talent-card.list .talent-info { padding: 15px; }
    .talent-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px; }
    .talent-name { font-size: 18px; font-weight: 600; color: #333; }
    .talent-card.list .talent-name { font-size: 16px; }
    .talent-actions { display: flex; gap: 8px; }
    .action-btn { background: none; border: none; cursor: pointer; font-size: 18px; opacity: 0.6; transition: opacity 0.2s; padding: 4px 8px; }
    .action-btn:hover { opacity: 1; }
    
    .talent-category { font-size: 12px; color: #fff; margin-bottom: 8px; background: #0a7ea4; padding: 4px 8px; border-radius: 4px; display: inline-block; font-weight: 600; }
    .talent-details { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; font-size: 13px; }
    .talent-card.list .talent-details { grid-template-columns: 1fr 1fr 1fr; }
    .detail-item { }
    .detail-label { color: #999; }
    .detail-value { font-weight: 600; color: #333; }
    
    .talent-price { font-size: 18px; font-weight: 700; color: #0a7ea4; margin-top: 12px; padding-top: 12px; border-top: 1px solid #f0f0f0; }
    .talent-social { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }
    .social-link { padding: 4px 8px; background: #f0f0f0; border-radius: 4px; font-size: 11px; cursor: pointer; transition: all 0.2s; }
    .social-link:hover { background: #0a7ea4; color: white; }
    
    .rating { display: flex; gap: 4px; margin-top: 8px; }
    .star { color: #ddd; cursor: pointer; font-size: 16px; }
    .star.filled { color: #ffc107; }
    
    .tags { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
    .tag { background: #e3f2fd; color: #0a7ea4; padding: 4px 8px; border-radius: 4px; font-size: 11px; }
    
    /* Empty State */
    .empty-state { text-align: center; padding: 80px 20px; }
    .empty-icon { font-size: 80px; margin-bottom: 20px; }
    .empty-title { font-size: 24px; font-weight: 600; margin-bottom: 10px; }
    .empty-text { color: #999; margin-bottom: 30px; }
    
    /* Modals */
    .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; overflow-y: auto; }
    .modal.active { display: flex; }
    .modal-content { background: white; border-radius: 10px; padding: 30px; max-width: 700px; width: 90%; max-height: 90vh; overflow-y: auto; margin: auto; }
    .modal-header { font-size: 22px; font-weight: 600; margin-bottom: 20px; color: #333; }
    
    /* Forms */
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #333; }
    .form-input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; transition: all 0.2s; }
    .form-input:focus { outline: none; border-color: #0a7ea4; box-shadow: 0 0 0 3px rgba(10, 126, 164, 0.1); }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .form-row.full { grid-template-columns: 1fr; }
    .modal-footer { display: flex; gap: 12px; margin-top: 30px; justify-content: flex-end; }
    
    /* Projects */
    .projects-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
    .project-card { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .project-name { font-size: 18px; font-weight: 600; margin-bottom: 10px; }
    .project-status { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; }
    .project-budget { color: #0a7ea4; font-weight: 600; margin-top: 10px; }
    .project-talents { margin-top: 10px; font-size: 13px; color: #666; }
    
    /* Stats */
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .stat-card { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .stat-label { color: #999; font-size: 14px; margin-bottom: 8px; }
    .stat-value { font-size: 32px; font-weight: 700; color: #0a7ea4; }
    
    /* Settings */
    .settings-form { max-width: 600px; }
    .settings-group { margin-bottom: 30px; padding-bottom: 30px; border-bottom: 1px solid #e0e0e0; }
    .settings-group:last-child { border-bottom: none; }
    .settings-title { font-size: 16px; font-weight: 600; margin-bottom: 15px; }
    
    /* Messages */
    .message-templates { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
    .template-card { background: #f9f9f9; border-radius: 6px; padding: 15px; }
    .template-name { font-weight: 600; margin-bottom: 10px; }
    .template-content { font-size: 13px; color: #666; line-height: 1.5; margin-bottom: 10px; }
    
    /* Success Message */
    .success-message { background: #d4edda; color: #155724; padding: 12px 16px; border-radius: 6px; margin-bottom: 15px; display: none; }
    .success-message.show { display: block; }
    
    /* Photo Gallery */
    .photo-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin-bottom: 20px; }
    .photo-item { position: relative; width: 100%; aspect-ratio: 1; border-radius: 6px; overflow: hidden; background: #f0f0f0; cursor: pointer; }
    .photo-item img { width: 100%; height: 100%; object-fit: cover; }
    .photo-item .remove-btn { position: absolute; top: 5px; right: 5px; background: #ef4444; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; display: none; }
    .photo-item:hover .remove-btn { display: block; }
    .add-photo-btn { width: 100%; aspect-ratio: 1; border: 2px dashed #ddd; border-radius: 6px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; }
    .add-photo-btn:hover { border-color: #0a7ea4; background: #f9f9f9; }
    
    /* WhatsApp Button */
    .whatsapp-btn { background: #25D366; color: white; padding: 8px 12px; border-radius: 4px; border: none; cursor: pointer; font-size: 12px; display: inline-flex; align-items: center; gap: 6px; }
    .whatsapp-btn:hover { background: #20ba5a; }
    
    /* Responsive */
    @media (max-width: 768px) {
      .app-container { flex-direction: column; }
      .sidebar { width: 100%; height: auto; max-height: 200px; }
      .form-row { grid-template-columns: 1fr; }
      .talents-grid { grid-template-columns: 1fr; }
      .header { flex-direction: column; gap: 15px; }
      .filters-bar { flex-direction: column; }
      .search-input { min-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <button class="toggle-sidebar" onclick="toggleSidebar()">â˜°</button>
      <div class="logo">ğŸ¬ Talent Manager</div>
      
      <div class="nav-section">
        <div class="nav-title">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
        <div class="nav-item active" onclick="switchPage('talents', this)">ğŸ‘¥ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø² ÙˆØ§Ù„ÙÙ†Ø§Ù†ÙŠÙ†</div>
        <div class="nav-item" onclick="switchPage('projects', this)">ğŸ“‹ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
        <div class="nav-item" onclick="switchPage('dashboard', this)">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
      </div>

      <div class="nav-section">
        <div class="nav-title">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</div>
        <div class="nav-item" onclick="switchPage('messages', this)">ğŸ’¬ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</div>
        <div class="nav-item" onclick="switchPage('categories', this)">ğŸ·ï¸ Ø§Ù„ÙØ¦Ø§Øª</div>
      </div>

      <div class="nav-section">
        <div class="nav-title">Ø£Ø®Ø±Ù‰</div>
        <div class="nav-item" onclick="switchPage('settings', this)">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Header -->
      <div class="header">
        <h1>Talent Manager</h1>
        <div class="header-actions">
          <button class="btn btn-primary" onclick="openAddTalentModal()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¯ÙŠÙ„</button>
        </div>
      </div>

      <!-- Content -->
      <div class="content">
        <!-- Talents Page -->
        <div id="talents-page" class="page active">
          <div class="page-header">
            <h2 class="page-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø² ÙˆØ§Ù„ÙÙ†Ø§Ù†ÙŠÙ†</h2>
            <p class="page-subtitle">Ø£Ø¶Ù ÙˆØ£Ø¯Ø± Ù…ÙˆØ¯ÙŠÙ„Ø§ØªÙƒ ÙˆÙÙ†Ø§Ù†ÙŠÙƒ Ø¨Ø³Ù‡ÙˆÙ„Ø©</p>
          </div>

          <div class="filters-bar">
            <input type="text" class="search-input" id="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆØ¯ÙŠÙ„..." onkeyup="filterTalents()">
            <select class="filter-select" id="category-filter" onchange="filterTalents()">
              <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
              <option value="Ù…Ù…Ø«Ù„ÙŠÙ†">Ù…Ù…Ø«Ù„ÙŠÙ†</option>
              <option value="Ù…Ø¤Ø«Ø±ÙŠÙ†">Ù…Ø¤Ø«Ø±ÙŠÙ†</option>
              <option value="Ø¹Ø§Ø±Ø¶ÙŠÙ†">Ø¹Ø§Ø±Ø¶ÙŠÙ†</option>
              <option value="ÙƒÙˆÙ…Ø¨Ø§Ø±Ø³">ÙƒÙˆÙ…Ø¨Ø§Ø±Ø³</option>
            </select>
            <select class="filter-select" id="gender-filter" onchange="filterTalents()">
              <option value="">Ø§Ù„ÙƒÙ„</option>
              <option value="male">Ø°ÙƒØ±</option>
              <option value="female">Ø£Ù†Ø«Ù‰</option>
            </select>
            <select class="filter-select" id="sort-select" onchange="filterTalents()">
              <option value="name">Ø§Ù„Ø§Ø³Ù…</option>
              <option value="price">Ø§Ù„Ø³Ø¹Ø±</option>
              <option value="rating">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</option>
              <option value="date">Ø§Ù„ØªØ§Ø±ÙŠØ®</option>
            </select>
            <div class="view-controls">
              <button class="view-btn active" onclick="setViewMode('grid')">âŠ Ø´Ø¨ÙƒØ©</button>
              <button class="view-btn" onclick="setViewMode('list')">â˜° Ù‚Ø§Ø¦Ù…Ø©</button>
            </div>
          </div>

          <div id="talents-container" class="talents-grid"></div>
        </div>

        <!-- Projects Page -->
        <div id="projects-page" class="page">
          <div class="page-header">
            <h2 class="page-title">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</h2>
            <p class="page-subtitle">Ø£Ù†Ø´Ø¦ ÙˆØ£Ø¯Ø± Ù…Ø´Ø§Ø±ÙŠØ¹Ùƒ ÙˆØ±Ø¨Ø· Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø² Ø¨Ù‡Ø§</p>
          </div>
          <button class="btn btn-primary" onclick="openAddProjectModal()">+ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</button>
          <div id="projects-container" class="projects-grid" style="margin-top: 20px;"></div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page">
          <div class="page-header">
            <h2 class="page-title">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
            <p class="page-subtitle">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØªÙ‚Ø§Ø±ÙŠØ± Ø´Ø§Ù…Ù„Ø©</p>
          </div>
          <div class="stats-grid" id="stats-container"></div>
        </div>

        <!-- Messages Page -->
        <div id="messages-page" class="page">
          <div class="page-header">
            <h2 class="page-title">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„</h2>
            <p class="page-subtitle">Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„</p>
          </div>
          <div style="background: white; border-radius: 8px; padding: 20px;">
            <h3 style="margin-bottom: 15px;">Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h3>
            <div class="message-templates" id="templates-container"></div>
          </div>
        </div>

        <!-- Categories Page -->
        <div id="categories-page" class="page">
          <div class="page-header">
            <h2 class="page-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¦Ø§Øª</h2>
            <p class="page-subtitle">Ø£Ø¶Ù ÙˆØ¹Ø¯Ù‘Ù„ ÙØ¦Ø§Øª Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø²</p>
          </div>
          <button class="btn btn-primary" onclick="openAddCategoryModal()">+ ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
          <div id="categories-container" style="margin-top: 20px;"></div>
        </div>

        <!-- Settings Page -->
        <div id="settings-page" class="page">
          <div class="page-header">
            <h2 class="page-title">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
          </div>
          <div class="success-message" id="success-message">âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!</div>
          <div class="settings-form">
            <div class="settings-group">
              <div class="settings-title">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</div>
              <div class="form-group">
                <label class="form-label">Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (%)</label>
                <input type="number" class="form-input" id="settings-margin" value="15">
              </div>
              <div class="form-group">
                <label class="form-label">Ø±Ø³Ø§Ù„Ø© WhatsApp Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</label>
                <textarea class="form-input" id="settings-whatsapp" style="min-height: 100px; resize: vertical;">Ù…Ø±Ø­Ø¨Ø§Ù‹ {name}ØŒ Ø£ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¨Ø®ØµÙˆØµ ÙØ±ØµØ© Ø¹Ù…Ù„...</textarea>
              </div>
            </div>
            <button class="btn btn-primary" onclick="saveSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add/Edit Talent Modal -->
  <div id="talent-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header" id="modal-title">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¯ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</div>
      
      <div class="form-group">
        <label class="form-label">Ø§Ù„Ø§Ø³Ù…</label>
        <input type="text" class="form-input" id="talent-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Ø§Ù„ÙØ¦Ø©</label>
          <select class="form-input" id="talent-category">
            <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
            <option value="Ù…Ù…Ø«Ù„ÙŠÙ†">Ù…Ù…Ø«Ù„ÙŠÙ†</option>
            <option value="Ù…Ø¤Ø«Ø±ÙŠÙ†">Ù…Ø¤Ø«Ø±ÙŠÙ†</option>
            <option value="Ø¹Ø§Ø±Ø¶ÙŠÙ†">Ø¹Ø§Ø±Ø¶ÙŠÙ†</option>
            <option value="ÙƒÙˆÙ…Ø¨Ø§Ø±Ø³">ÙƒÙˆÙ…Ø¨Ø§Ø±Ø³</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¬Ù†Ø³</label>
          <select class="form-input" id="talent-gender">
            <option value="male">Ø°ÙƒØ±</option>
            <option value="female">Ø£Ù†Ø«Ù‰</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø³Ø¹Ø± (Ù„ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹) - KD</label>
          <input type="number" class="form-input" id="talent-price" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø±">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (1-5)</label>
          <input type="number" class="form-input" id="talent-rating" min="0" max="5" value="0">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ù‡Ø§ØªÙ (+965)</label>
          <input type="tel" class="form-input" id="talent-phone" placeholder="501234567">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¹Ù…Ø±</label>
          <input type="number" class="form-input" id="talent-age" placeholder="Ø§Ù„Ø¹Ù…Ø±">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø·ÙˆÙ„</label>
          <input type="text" class="form-input" id="talent-height" placeholder="Ù…Ø«Ø§Ù„: 175 Ø³Ù…">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ÙˆØ²Ù†</label>
          <input type="text" class="form-input" id="talent-weight" placeholder="Ù…Ø«Ø§Ù„: 70 ÙƒØº">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¬Ù†Ø³ÙŠØ©</label>
          <input type="text" class="form-input" id="talent-nationality" placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
          <input type="text" class="form-input" id="talent-location" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ø¯ÙˆÙ„Ø©">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Instagram</label>
          <input type="text" class="form-input" id="talent-instagram" placeholder="@username">
        </div>
        <div class="form-group">
          <label class="form-label">TikTok</label>
          <input type="text" class="form-input" id="talent-tiktok" placeholder="@username">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Twitter</label>
          <input type="text" class="form-input" id="talent-twitter" placeholder="@username">
        </div>
        <div class="form-group">
          <label class="form-label">Facebook</label>
          <input type="text" class="form-input" id="talent-facebook" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ù„Ø§Ø³Ù…">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
        <textarea class="form-input" id="talent-notes" style="min-height: 80px; resize: vertical;" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..."></textarea>
      </div>

      <div class="form-group">
        <label class="form-label">Ø§Ù„ØµÙˆØ±</label>
        <div class="photo-gallery" id="photo-gallery"></div>
        <input type="file" id="photo-input" multiple accept="image/*" style="display: none;" onchange="addPhotos()">
        <button type="button" class="btn btn-secondary" onclick="document.getElementById('photo-input').click()">ğŸ“· Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±</button>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('talent-modal')">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn btn-danger" id="delete-btn" style="display: none;" onclick="confirmDeleteTalent()">Ø­Ø°Ù</button>
        <button class="btn btn-primary" id="save-btn" onclick="saveTalent()">Ø¥Ø¶Ø§ÙØ©</button>
      </div>
    </div>
  </div>

  <!-- Add/Edit Project Modal -->
  <div id="project-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</div>
      
      <div class="form-group">
        <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
        <input type="text" class="form-input" id="project-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹">
      </div>

      <div class="form-group">
        <label class="form-label">Ø§Ù„ÙˆØµÙ</label>
        <textarea class="form-input" id="project-description" style="min-height: 80px; resize: vertical;" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹..."></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</label>
          <input type="date" class="form-input" id="project-start-date">
        </div>
        <div class="form-group">
          <label class="form-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</label>
          <input type="date" class="form-input" id="project-end-date">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø­Ø§Ù„Ø©</label>
          <select class="form-input" id="project-status">
            <option value="draft">Ù…Ø³ÙˆØ¯Ø©</option>
            <option value="active">Ù†Ø´Ø·</option>
            <option value="completed">Ù…ÙƒØªÙ…Ù„</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ (%)</label>
          <input type="number" class="form-input" id="project-margin" value="15">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø²</label>
        <div id="talents-checklist" style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 6px; padding: 10px;"></div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('project-modal')">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn btn-primary" onclick="saveProject()">Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</button>
      </div>
    </div>
  </div>

  <!-- Add Category Modal -->
  <div id="category-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>
      
      <div class="form-group">
        <label class="form-label">Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©</label>
        <input type="text" class="form-input" id="category-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©">
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('category-modal')">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn btn-primary" onclick="saveCategory()">Ø­ÙØ¸ Ø§Ù„ÙØ¦Ø©</button>
      </div>
    </div>
  </div>

  <script>
    // ============ DATA STORAGE ============
    let talents = [];
    let projects = [];
    let categories = ['Ù…Ù…Ø«Ù„ÙŠÙ†', 'Ù…Ø¤Ø«Ø±ÙŠÙ†', 'Ø¹Ø§Ø±Ø¶ÙŠÙ†', 'ÙƒÙˆÙ…Ø¨Ø§Ø±Ø³'];
    let messageTemplates = [
      { name: 'Ø¹Ø±Ø¶ Ø¹Ù…Ù„', content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ {name}ØŒ Ù„Ø¯ÙŠ ÙØ±ØµØ© Ø¹Ù…Ù„ Ù…Ù…ÙŠØ²Ø© Ù„Ùƒ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ§Ø­ ÙÙŠ {date}ØŸ' },
      { name: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²', content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ {name}ØŒ ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø²Ùƒ Ù„Ù…Ø´Ø±ÙˆØ¹ {project} ÙÙŠ {date}. Ø§Ù„Ù…ÙˆÙ‚Ø¹: {location}' },
      { name: 'Ø´ÙƒØ±Ø§Ù‹', content: 'Ø´ÙƒØ±Ø§Ù‹ {name} Ø¹Ù„Ù‰ Ø¹Ù…Ù„Ùƒ Ø§Ù„Ø±Ø§Ø¦Ø¹ ÙÙŠ {project}! Ù†ØªØ·Ù„Ø¹ Ù„Ù„Ø¹Ù…Ù„ Ù…Ø¹Ùƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.' },
      { name: 'ØªØ°ÙƒÙŠØ±', content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ {name}ØŒ ØªØ°ÙƒÙŠØ± Ø¨Ù…ÙˆØ¹Ø¯Ùƒ ØºØ¯Ø§Ù‹ Ø§Ù„Ø³Ø§Ø¹Ø© {time}. ÙŠØ±Ø¬Ù‰ ØªØ£ÙƒÙŠØ¯ Ø­Ø¶ÙˆØ±Ùƒ.' },
    ];
    
    let appSettings = {
      margin: 15,
      whatsappMessage: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ {name}ØŒ Ø£ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¨Ø®ØµÙˆØµ ÙØ±ØµØ© Ø¹Ù…Ù„...'
    };
    
    let viewMode = 'grid';
    let editingTalentId = null;
    let talentPhotos = {};

    // ============ INITIALIZATION ============
    function init() {
      loadData();
      renderTalents();
      renderProjects();
      renderStats();
      renderMessages();
      renderCategories();
      loadSettings();
    }

    function loadData() {
      const savedTalents = localStorage.getItem('talents');
      const savedProjects = localStorage.getItem('projects');
      const savedCategories = localStorage.getItem('categories');
      const savedSettings = localStorage.getItem('appSettings');
      const savedPhotos = localStorage.getItem('talentPhotos');

      if (savedTalents) talents = JSON.parse(savedTalents);
      if (savedProjects) projects = JSON.parse(savedProjects);
      if (savedCategories) categories = JSON.parse(savedCategories);
      if (savedSettings) appSettings = JSON.parse(savedSettings);
      if (savedPhotos) talentPhotos = JSON.parse(savedPhotos);

      // Load sample data if empty
      if (talents.length === 0) {
        talents = [
          { id: '1', name: 'Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ', category: 'Ù…Ù…Ø«Ù„ÙŠÙ†', gender: 'male', price: 5000, age: 25, phone: '501234567', instagram: '@ahmed', tiktok: '@ahmed', rating: 4, height: '175 Ø³Ù…', weight: '70 ÙƒØº', nationality: 'ÙƒÙˆÙŠØªÙŠ', location: 'Ø§Ù„ÙƒÙˆÙŠØª', tags: ['VIP', 'Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù†'], isFavorite: false, createdAt: new Date().toISOString() },
          { id: '2', name: 'ÙØ§Ø·Ù…Ø© Ù…Ø­Ù…Ø¯', category: 'Ø¹Ø§Ø±Ø¶ÙŠÙ†', gender: 'female', price: 8000, age: 28, phone: '509876543', instagram: '@fatima', tiktok: '@fatima', rating: 5, height: '168 Ø³Ù…', weight: '55 ÙƒØº', nationality: 'Ø³Ø¹ÙˆØ¯ÙŠØ©', location: 'Ø§Ù„Ø±ÙŠØ§Ø¶', tags: ['Top Rated'], isFavorite: true, createdAt: new Date().toISOString() },
          { id: '3', name: 'Ù…Ø­Ù…ÙˆØ¯ Ø­Ø³Ù†', category: 'ÙƒÙˆÙ…Ø¨Ø§Ø±Ø³', gender: 'male', price: 3000, age: 22, phone: '505555555', instagram: '@mahmoud', tiktok: '@mahmoud', rating: 3, height: '180 Ø³Ù…', weight: '75 ÙƒØº', nationality: 'Ø¥Ù…Ø§Ø±Ø§ØªÙŠ', location: 'Ø¯Ø¨ÙŠ', tags: ['New'], isFavorite: false, createdAt: new Date().toISOString() },
        ];
        saveData();
      }
    }

    function saveData() {
      localStorage.setItem('talents', JSON.stringify(talents));
      localStorage.setItem('projects', JSON.stringify(projects));
      localStorage.setItem('categories', JSON.stringify(categories));
      localStorage.setItem('appSettings', JSON.stringify(appSettings));
      localStorage.setItem('talentPhotos', JSON.stringify(talentPhotos));
    }

    // ============ NAVIGATION ============
    function switchPage(page, element) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(page + '-page').classList.add('active');
      document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
      element.classList.add('active');

      if (page === 'dashboard') renderStats();
      if (page === 'messages') renderMessages();
      if (page === 'projects') renderProjects();
      if (page === 'categories') renderCategories();
      if (page === 'settings') loadSettings();
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('collapsed');
    }

    // ============ TALENTS ============
    function renderTalents(talentsToRender = talents) {
      const container = document.getElementById('talents-container');
      if (talentsToRender.length === 0) {
        container.innerHTML = '<div style="grid-column: 1/-1;"><div class="empty-state"><div class="empty-icon">ğŸ”</div><div class="empty-title">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬</div></div></div>';
        return;
      }

      const viewClass = viewMode === 'list' ? 'talent-card list' : 'talent-card';
      const containerClass = viewMode === 'list' ? 'talents-list' : 'talents-grid';
      
      container.className = containerClass;
      container.innerHTML = talentsToRender.map(t => `
        <div class="${viewClass}">
          <div class="talent-image-container">
            <div class="talent-image">${t.gender === 'male' ? 'ğŸ‘¨' : 'ğŸ‘©'}</div>
          </div>
          <div class="talent-info">
            <div class="talent-header">
              <div>
                <div class="talent-name">${t.name}</div>
                <span class="talent-category">${t.category}</span>
              </div>
              <div class="talent-actions">
                <button class="action-btn" onclick="toggleFavorite('${t.id}')" title="Ø§Ù„Ù…ÙØ¶Ù„Ø©">${t.isFavorite ? 'â¤ï¸' : 'ğŸ¤'}</button>
                <button class="action-btn" onclick="editTalent('${t.id}')" title="ØªØ¹Ø¯ÙŠÙ„">âœï¸</button>
                <button class="action-btn" onclick="deleteTalent('${t.id}')" title="Ø­Ø°Ù">ğŸ—‘ï¸</button>
              </div>
            </div>
            <div class="talent-details">
              <div class="detail-item">
                <div class="detail-label">Ø§Ù„Ø¹Ù…Ø±</div>
                <div class="detail-value">${t.age || '-'} Ø³Ù†Ø©</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Ø§Ù„Ø¬Ù†Ø³</div>
                <div class="detail-value">${t.gender === 'male' ? 'Ø°ÙƒØ±' : 'Ø£Ù†Ø«Ù‰'}</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</div>
                <div class="detail-value">${t.location || '-'}</div>
              </div>
            </div>
            <div class="rating">
              ${[1,2,3,4,5].map(i => `<span class="star ${i <= (t.rating || 0) ? 'filled' : ''}">â˜…</span>`).join('')}
            </div>
            <div class="talent-price">${t.price.toLocaleString()} KD</div>
            <div class="talent-social">
              ${t.phone ? `<button class="whatsapp-btn" onclick="openWhatsApp('${t.phone}', '${t.name}')">ğŸ’¬ ÙˆØ§ØªØ³</button>` : ''}
              ${t.instagram ? `<div class="social-link">ğŸ“± Instagram</div>` : ''}
              ${t.tiktok ? `<div class="social-link">ğŸµ TikTok</div>` : ''}
            </div>
          </div>
        </div>
      `).join('');
    }

    function filterTalents() {
      const query = document.getElementById('search-input').value.toLowerCase();
      const category = document.getElementById('category-filter').value;
      const gender = document.getElementById('gender-filter').value;
      const sort = document.getElementById('sort-select').value;

      let filtered = talents.filter(t => {
        const matchesSearch = t.name.toLowerCase().includes(query);
        const matchesCategory = !category || t.category === category;
        const matchesGender = !gender || t.gender === gender;
        return matchesSearch && matchesCategory && matchesGender;
      });

      filtered.sort((a, b) => {
        switch(sort) {
          case 'price': return a.price - b.price;
          case 'rating': return (b.rating || 0) - (a.rating || 0);
          case 'date': return new Date(b.createdAt) - new Date(a.createdAt);
          default: return a.name.localeCompare(b.name);
        }
      });

      renderTalents(filtered);
    }

    function setViewMode(mode) {
      viewMode = mode;
      document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      renderTalents();
    }

    function openAddTalentModal() {
      editingTalentId = null;
      talentPhotos = {};
      document.getElementById('modal-title').textContent = 'Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¯ÙŠÙ„ Ø¬Ø¯ÙŠØ¯';
      document.getElementById('save-btn').textContent = 'Ø¥Ø¶Ø§ÙØ©';
      document.getElementById('delete-btn').style.display = 'none';
      clearTalentForm();
      renderPhotoGallery();
      document.getElementById('talent-modal').classList.add('active');
    }

    function editTalent(id) {
      const talent = talents.find(t => t.id === id);
      if (!talent) return;

      editingTalentId = id;
      talentPhotos = {};
      document.getElementById('modal-title').textContent = 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„';
      document.getElementById('save-btn').textContent = 'Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª';
      document.getElementById('delete-btn').style.display = 'block';

      document.getElementById('talent-name').value = talent.name;
      document.getElementById('talent-category').value = talent.category;
      document.getElementById('talent-gender').value = talent.gender;
      document.getElementById('talent-price').value = talent.price;
      document.getElementById('talent-phone').value = talent.phone || '';
      document.getElementById('talent-age').value = talent.age || '';
      document.getElementById('talent-height').value = talent.height || '';
      document.getElementById('talent-weight').value = talent.weight || '';
      document.getElementById('talent-nationality').value = talent.nationality || '';
      document.getElementById('talent-location').value = talent.location || '';
      document.getElementById('talent-instagram').value = talent.instagram || '';
      document.getElementById('talent-tiktok').value = talent.tiktok || '';
      document.getElementById('talent-twitter').value = talent.twitter || '';
      document.getElementById('talent-facebook').value = talent.facebook || '';
      document.getElementById('talent-rating').value = talent.rating || 0;
      document.getElementById('talent-notes').value = talent.notes || '';

      renderPhotoGallery();
      document.getElementById('talent-modal').classList.add('active');
    }

    function clearTalentForm() {
      document.querySelectorAll('#talent-modal .form-input').forEach(input => {
        if (input.id !== 'talent-rating') input.value = '';
        if (input.id === 'talent-rating') input.value = '0';
      });
    }

    function saveTalent() {
      const name = document.getElementById('talent-name').value;
      const category = document.getElementById('talent-category').value;
      const gender = document.getElementById('talent-gender').value;
      const price = parseInt(document.getElementById('talent-price').value);

      if (!name || !category || !price) {
        alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
        return;
      }

      const talentData = {
        name,
        category,
        gender,
        price,
        age: parseInt(document.getElementById('talent-age').value) || 0,
        phone: document.getElementById('talent-phone').value,
        instagram: document.getElementById('talent-instagram').value,
        tiktok: document.getElementById('talent-tiktok').value,
        twitter: document.getElementById('talent-twitter').value,
        facebook: document.getElementById('talent-facebook').value,
        height: document.getElementById('talent-height').value,
        weight: document.getElementById('talent-weight').value,
        nationality: document.getElementById('talent-nationality').value,
        location: document.getElementById('talent-location').value,
        notes: document.getElementById('talent-notes').value,
        rating: parseInt(document.getElementById('talent-rating').value) || 0,
      };

      if (editingTalentId) {
        const talentIndex = talents.findIndex(t => t.id === editingTalentId);
        if (talentIndex !== -1) {
          talents[talentIndex] = { ...talents[talentIndex], ...talentData };
        }
      } else {
        talents.push({
          id: Date.now().toString(),
          ...talentData,
          tags: [],
          isFavorite: false,
          createdAt: new Date().toISOString()
        });
      }

      saveData();
      renderTalents();
      closeModal('talent-modal');
    }

    function deleteTalent(id) {
      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ØŸ')) {
        talents = talents.filter(t => t.id !== id);
        saveData();
        renderTalents();
        closeModal('talent-modal');
      }
    }

    function confirmDeleteTalent() {
      if (editingTalentId) deleteTalent(editingTalentId);
    }

    function toggleFavorite(id) {
      const talent = talents.find(t => t.id === id);
      if (talent) {
        talent.isFavorite = !talent.isFavorite;
        saveData();
        renderTalents();
      }
    }

    function openWhatsApp(phone, name) {
      const message = appSettings.whatsappMessage.replace('{name}', name);
      const url = `https://wa.me/965${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }

    function addPhotos() {
      const input = document.getElementById('photo-input');
      const files = input.files;
      for (let file of files) {
        const reader = new FileReader();
        reader.onload = (e) => {
          const photoId = Date.now().toString();
          if (!talentPhotos[editingTalentId || 'new']) talentPhotos[editingTalentId || 'new'] = [];
          talentPhotos[editingTalentId || 'new'].push(e.target.result);
          renderPhotoGallery();
        };
        reader.readAsDataURL(file);
      }
    }

    function renderPhotoGallery() {
      const gallery = document.getElementById('photo-gallery');
      const photos = talentPhotos[editingTalentId || 'new'] || [];
      gallery.innerHTML = photos.map((photo, idx) => `
        <div class="photo-item">
          <img src="${photo}" alt="photo">
          <button class="remove-btn" onclick="removePhoto(${idx})">Ã—</button>
        </div>
      `).join('') + `<div class="add-photo-btn" onclick="document.getElementById('photo-input').click()">+ Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©</div>`;
    }

    function removePhoto(idx) {
      const key = editingTalentId || 'new';
      if (talentPhotos[key]) {
        talentPhotos[key].splice(idx, 1);
        renderPhotoGallery();
      }
    }

    // ============ PROJECTS ============
    function renderProjects() {
      const container = document.getElementById('projects-container');
      if (projects.length === 0) {
        container.innerHTML = '<div style="grid-column: 1/-1;"><div class="empty-state"><div class="empty-icon">ğŸ“‹</div><div class="empty-title">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹</div></div></div>';
        return;
      }

      container.innerHTML = projects.map(p => {
        const projectTalents = p.talents ? p.talents.map(tid => talents.find(t => t.id === tid)?.name).filter(Boolean).join(', ') : '';
        const totalCost = p.talents ? p.talents.reduce((sum, tid) => {
          const talent = talents.find(t => t.id === tid);
          return sum + (talent?.price || 0);
        }, 0) : 0;
        const profitMargin = totalCost * (p.margin || 15) / 100;
        const totalPrice = totalCost + profitMargin;

        return `
          <div class="project-card">
            <div class="project-name">${p.name}</div>
            <div class="project-status" style="background: ${p.status === 'active' ? '#e3f2fd' : '#f0f0f0'}; color: ${p.status === 'active' ? '#0a7ea4' : '#666'};">${p.status === 'active' ? 'Ù†Ø´Ø·' : p.status === 'completed' ? 'Ù…ÙƒØªÙ…Ù„' : 'Ù…Ø³ÙˆØ¯Ø©'}</div>
            <div class="project-talents">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø²: ${projectTalents || '-'}</div>
            <div class="project-budget">Ø§Ù„ØªÙƒÙ„ÙØ©: ${totalCost.toLocaleString()} KD</div>
            <div class="project-budget">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${totalPrice.toLocaleString()} KD</div>
          </div>
        `;
      }).join('');
    }

    function openAddProjectModal() {
      document.getElementById('project-name').value = '';
      document.getElementById('project-description').value = '';
      document.getElementById('project-status').value = 'draft';
      document.getElementById('project-margin').value = appSettings.margin;
      
      const checklist = document.getElementById('talents-checklist');
      checklist.innerHTML = talents.map(t => `
        <div style="padding: 8px; border-bottom: 1px solid #eee;">
          <input type="checkbox" id="talent-${t.id}" value="${t.id}">
          <label for="talent-${t.id}" style="margin-right: 8px; cursor: pointer;">${t.name} (${t.price} KD)</label>
        </div>
      `).join('');

      document.getElementById('project-modal').classList.add('active');
    }

    function saveProject() {
      const name = document.getElementById('project-name').value;
      if (!name) {
        alert('ÙŠØ±Ø¬Ù‰ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹');
        return;
      }

      const selectedTalents = Array.from(document.querySelectorAll('#talents-checklist input:checked')).map(cb => cb.value);
      if (selectedTalents.length === 0) {
        alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªØ± Ù…ÙˆØ¯ÙŠÙ„ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
        return;
      }

      projects.push({
        id: Date.now().toString(),
        name,
        description: document.getElementById('project-description').value,
        status: document.getElementById('project-status').value,
        talents: selectedTalents,
        margin: parseInt(document.getElementById('project-margin').value),
        createdAt: new Date().toISOString()
      });

      saveData();
      renderProjects();
      closeModal('project-modal');
    }

    // ============ DASHBOARD ============
    function renderStats() {
      const container = document.getElementById('stats-container');
      const totalTalents = talents.length;
      const totalProjects = projects.length;
      const totalRevenue = projects.reduce((sum, p) => {
        const cost = p.talents ? p.talents.reduce((s, tid) => s + (talents.find(t => t.id === tid)?.price || 0), 0) : 0;
        const profit = cost * (p.margin || 15) / 100;
        return sum + cost + profit;
      }, 0);
      const favoriteTalents = talents.filter(t => t.isFavorite).length;

      container.innerHTML = `
        <div class="stat-card">
          <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø²</div>
          <div class="stat-value">${totalTalents}</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
          <div class="stat-value">${totalProjects}</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</div>
          <div class="stat-value">${totalRevenue.toLocaleString()} KD</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Ø§Ù„Ù…ÙØ¶Ù„Ø©</div>
          <div class="stat-value">${favoriteTalents}</div>
        </div>
      `;
    }

    // ============ MESSAGES ============
    function renderMessages() {
      const container = document.getElementById('templates-container');
      container.innerHTML = messageTemplates.map(t => `
        <div class="template-card">
          <div class="template-name">${t.name}</div>
          <div class="template-content">${t.content}</div>
          <button class="btn btn-small btn-primary" style="width: 100%;">Ù†Ø³Ø®</button>
        </div>
      `).join('');
    }

    // ============ CATEGORIES ============
    function renderCategories() {
      const container = document.getElementById('categories-container');
      container.innerHTML = `
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;">
          ${categories.map((cat, idx) => `
            <div style="background: white; border-radius: 8px; padding: 15px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
              <div style="font-size: 24px; margin-bottom: 10px;">ğŸ·ï¸</div>
              <div style="font-weight: 600; margin-bottom: 10px;">${cat}</div>
              <button class="btn btn-small btn-danger" onclick="deleteCategory(${idx})">Ø­Ø°Ù</button>
            </div>
          `).join('')}
        </div>
      `;
    }

    function openAddCategoryModal() {
      document.getElementById('category-name').value = '';
      document.getElementById('category-modal').classList.add('active');
    }

    function saveCategory() {
      const name = document.getElementById('category-name').value;
      if (!name) {
        alert('ÙŠØ±Ø¬Ù‰ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©');
        return;
      }
      if (categories.includes(name)) {
        alert('Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„');
        return;
      }
      categories.push(name);
      saveData();
      renderCategories();
      closeModal('category-modal');
    }

    function deleteCategory(idx) {
      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©ØŸ')) {
        categories.splice(idx, 1);
        saveData();
        renderCategories();
      }
    }

    // ============ SETTINGS ============
    function loadSettings() {
      document.getElementById('settings-margin').value = appSettings.margin;
      document.getElementById('settings-whatsapp').value = appSettings.whatsappMessage;
    }

    function saveSettings() {
      appSettings.margin = parseInt(document.getElementById('settings-margin').value);
      appSettings.whatsappMessage = document.getElementById('settings-whatsapp').value;
      
      saveData();
      
      const msg = document.getElementById('success-message');
      msg.classList.add('show');
      setTimeout(() => msg.classList.remove('show'), 3000);
    }

    // ============ UTILITIES ============
    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    // Initialize on load
    window.addEventListener('load', init);
  </script>
</body>
</html>
